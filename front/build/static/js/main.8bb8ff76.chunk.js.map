{"version":3,"sources":["components/services/ajax.js","components/services/transformData.js","components/actions/RoomAction.js","components/rooms.js","components/floors.js","components/portal.js","components/busyToPlace.js","components/actions/SuccesWindowAction.js","components/header.js","components/successWindow.js","components/Options.js","components/Select.js","App.js","components/reducer/RoomReducer.js","store.js","components/reducer/SuccessWindowReducer.js","components/reducer/FloorReducer.js","index.js"],"names":["Ajax","_base","sendRequest","url","method","body","a","fetch","mode","headers","JSON","stringify","then","data","status","json","error","Promise","reject","request","checkResource","check","getResource","getResourceToFloor","id","changeResource","number","date","transformResource","resource","map","elem","floor","Name","room","transformDates","Data","Status","minutes","hours","day","month","trahsformRoom","floorId","defineFloors","props","getFloor","nonRepeat","forEach","includes","push","length","ajax","getRoomsUseFloor","dispatch","localStorage","setItem","type","payload","catch","ViewRoom","arrRooms","currentaFloor","getItem","className","createRoom","rooms","Room","checkRoomS","getRoomsInitial","this","interval","setInterval","RoomReducer","loading","React","Component","connect","Portal","el","document","createElement","appendChild","removeChild","children","ReactDOM","createPortal","Modal","useState","visible","setVisible","setNumber","setDay","setMonth","hour","setHour","setMinutes","setError","useDispatch","clear","modal","onSubmit","e","preventDefault","fields","querySelectorAll","Array","prototype","some","call","value","checkWriteIn","undefined","changeStatusRoom","onClick","name","onChange","target","maxLength","maLength","Header","SuccessWindow","SuccessWindowReducer","createSelect","qty","arrOption","i","Select","qtyFloorState","useSelector","state","FloorReducer","qtyFloor","sel","querySelector","selectedIndex","App","changeStatus","index","findIndex","oldElem","newElem","slice","reducer","combineReducers","action","console","log","composeEnhncer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8bb8ff76.chunk.js","sourcesContent":["export default class Ajax {\r\n    _base = 'http://localhost:5000';\r\n\r\n    sendRequest = async(url , method , body) =>{\r\n      const request = await fetch(`${this._base}${url}`, {\r\n        method : method,\r\n        mode: 'cors',\r\n        headers : {'Content-Type': 'application/json' },\r\n        body : JSON.stringify(body)\r\n      })\r\n      .then((data)=> data.status <= 200 ? data.json(): \r\n      data.json().then((error)=>Promise.reject(error))\r\n      .then((data)=>data));\r\n      return request;\r\n    }\r\n\r\n    checkResource = async() =>{\r\n      return this.sendRequest('/checkData', 'GET');\r\n    }\r\n\r\n    check = async() =>{\r\n      return this.sendRequest('/check' , 'GET');\r\n    }\r\n\r\n    getResource = async() =>{\r\n      return this.sendRequest('/', 'GET');\r\n    }\r\n\r\n    getResourceToFloor = async(id) =>{\r\n      return this.sendRequest(`/${id}`, 'GET');\r\n    }\r\n\r\n    changeResource = async(number , date) =>{\r\n      const body ={\r\n        number : number,\r\n        date : date\r\n      }\r\n      return this.sendRequest('/update' , 'PUT', body);\r\n\r\n    }\r\n\r\n}","\r\nconst transformResource = (resource) =>{\r\n    const transformResource = resource[0].map((elem)=>{\r\n      return{\r\n        floor : elem.Name[0],\r\n        room : elem.Name[1],\r\n        data : transformDates(elem.Data),\r\n        status : elem.Status\r\n      }\r\n    })\r\n    return transformResource ;\r\n  }\r\n\r\n  const transformDates = (date) =>{\r\n    if(date === null){\r\n      return ;\r\n    }\r\n    const minutes = date[14] + date[15];\r\n    const hours = date[11] + date[12];\r\n    const day = date[8] + date[9];\r\n    const month = date[5] + date[6];\r\n    return `До ${day}.${month} ${hours}:${minutes}`;\r\n  }\r\n\r\n  const trahsformRoom = (room) =>{\r\n    return{\r\n      floor : `${room[0][0].floorId} этаж`,\r\n      room : room[0][0].Name,\r\n      data : transformDates(room[0][0].Data),\r\n      status : room[0][0].Status\r\n    }\r\n  }\r\n\r\n  const defineFloors = (props) =>{ // определение кол-ва этажей\r\n    const getFloor = [];\r\n    let nonRepeat = [];\r\n    props.forEach(({floor})=>{\r\n      if(nonRepeat.includes(floor)){\r\n        return;\r\n      } \r\n      nonRepeat.push(floor);\r\n      getFloor.push(floor);\r\n    })\r\n    return getFloor.length ;\r\n  }\r\n\r\n\r\n\r\n  export {transformResource , trahsformRoom , defineFloors}\r\n ","import Ajax from '../services/ajax';\r\nimport {transformResource , trahsformRoom , defineFloors} from '../services/transformData';\r\nconst ajax = new Ajax();\r\n\r\nconst getRoomsInitial = () => async(dispatch) =>{\r\n     dispatch({type : 'LOADING_ROOMS'});\r\n     ajax.getResource()\r\n     .then((data)=>transformResource(data))\r\n     .then((data)=>{\r\n          dispatch({type : 'SUCCESS_ROOMS_INITIAL' , payload : data});\r\n          dispatch({type : 'GET_FLOORS' , payload : defineFloors(data)});\r\n     })\r\n     .catch((error)=>dispatch({type : 'FAILURE_ROOMS' , payload : error}))\r\n}\r\n\r\nconst getRoomsUseFloor = (id) => async(dispatch) => {\r\n     localStorage.setItem('current_floor' , id);\r\n     dispatch({type : 'LOADING_ROOMS'});\r\n     ajax.getResourceToFloor(id)\r\n     .then((data=>transformResource(data)))\r\n     .then((data)=> dispatch({type : 'SUCCESS_ROOMS_TO_FLOOR' , payload : data}))\r\n     .catch((error)=>dispatch({type : 'FAILURE_ROOMS' , payload : error}))\r\n}\r\n\r\nconst getFloors = (rooms) => (dispatch) =>{\r\n     dispatch({type : 'GET_FLOORS' , payload : rooms})\r\n}\r\n\r\nconst changeStatusRoom = (room) => async(dispatch) =>{\r\n     if(room === undefined){ return};\r\n     dispatch({type : 'CHANGE_STATUS_ROOM' , payload : trahsformRoom(room)})\r\n}\r\n\r\nexport {getRoomsInitial ,  getRoomsUseFloor , changeStatusRoom, getFloors};","import React from 'react';\r\n\r\n\r\nconst ViewRoom = (props) => {\r\n\r\nconst {rooms} = props;\r\n\r\nconst createRoom = (room) =>{  // формирование комнаты\r\n const arrRooms = [];\r\n const currentaFloor = localStorage.getItem('current_floor'); \r\n room.forEach((elem)=>{\r\n     if(elem.floor === `${currentaFloor} этаж`){\r\n      arrRooms.push(<li className={`place place__${elem.status}`} key={elem.room}>\r\n       <div>{elem.room}</div>\r\n       <div>{elem.status}</div>\r\n       <div>{elem.data}</div>\r\n     </li>)\r\n     }\r\n })\r\n return arrRooms;\r\n}\r\nconst arrRooms = createRoom(rooms);\r\n\r\n  return (\r\n    <ul className='inner__room'>\r\n         {arrRooms}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default ViewRoom;","import React from 'react';\r\nimport {getRoomsInitial , getRoomsUseFloor} from './actions/RoomAction';\r\nimport ViewRoom from './rooms';\r\nimport { connect } from 'react-redux';\r\nimport Ajax from './services/ajax'\r\n\r\nclass Room extends React.Component{\r\n\r\najax = new Ajax();\r\n\r\n\r\ncomponentDidMount(){\r\n//  const computerName = this.network.computerName;\r\n//  console.log('that is computer name-',computerName)\r\n localStorage.setItem('current_floor' , 1);\r\n this.props.getRoomsInitial();\r\n this.interval = setInterval(this.checkRoomS , 10000);\r\n}\r\n\r\ncheckRoomS = () =>{\r\n  this.ajax.checkResource()\r\n  .then(()=>this.props.getRoomsInitial())\r\n}\r\n\r\nrender(){\r\n  const {RoomReducer : {rooms , error ,  loading}} = this.props;\r\n  if(loading){\r\n    return <div>...Loading</div>\r\n  }\r\n  if(error){\r\n    <div>{error}</div>\r\n  }\r\n    return(\r\n      <div>\r\n        <ViewRoom rooms = {rooms} />\r\n      </div> \r\n    )\r\n \r\n }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) =>{\r\n return{\r\n  getRoomsInitial : ()=> dispatch(getRoomsInitial()),\r\n  getRoomsUseFloor : (id)=> dispatch(getRoomsUseFloor(id))\r\n }\r\n}\r\n\r\nconst mapStateToProps = ({RoomReducer}) =>{\r\nreturn {RoomReducer};\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Room);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nclass Portal extends React.Component{\r\n    constructor(props){\r\n      super(props);\r\n      this.el = document.createElement('div');\r\n    }\r\n\r\n    componentDidMount(){\r\n        document.body.appendChild(this.el);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        document.body.removeChild(this.el);\r\n    }\r\n\r\n    render(){\r\n    const {children} = this.props;\r\n\r\n      return ReactDOM.createPortal(children, this.el)\r\n    }\r\n}\r\n\r\nexport default Portal;","import React, {useEffect, useState } from 'react';\r\nimport { useDispatch} from 'react-redux';\r\nimport Portal from './portal';\r\nimport Ajax from '../components/services/ajax';\r\nimport {changeStatusRoom} from './actions/RoomAction';\r\nimport {setVisibleWindow , unSetVisibleWindow} from  './actions/SuccesWindowAction';\r\n\r\nconst Modal = () => {\r\n    const [visible, setVisible] = useState(false);\r\n    const [number, setNumber] = useState(null);\r\n    const [day, setDay] = useState(null);\r\n    const [month, setMonth] = useState(null);\r\n    const [hour, setHour] = useState(null);\r\n    const [minutes, setMinutes] = useState(null);\r\n    const [error, setError] = useState(null);\r\n    const dispatch = useDispatch();\r\n\r\n    const ajax = new Ajax();\r\n\r\n    //  useEffect(()=>{\r\n\r\n    //  }, [error])\r\n   \r\n    const clear = () =>{\r\n        setVisible(false);\r\n        setError(null);\r\n        setNumber(null);\r\n        setDay(null);\r\n        setMonth(null);\r\n        setHour(null);\r\n        setMinutes(null);\r\n    }\r\n\r\n    const success = () => {\r\n        dispatch(setVisibleWindow());\r\n        clear();\r\n    }\r\n\r\n    const openModal = () =>{\r\n        setVisible(true);\r\n        dispatch(unSetVisibleWindow());\r\n    }\r\n\r\n    const checkWriteIn = () =>{\r\n        const fields = document.querySelectorAll('input');\r\n        const res = Array.prototype.some.call(fields, (elem)=>elem.value.length === 0);\r\n        return res;\r\n    }\r\n\r\n   const loadingData = (e) =>{\r\n            e.preventDefault();\r\n            if(checkWriteIn()){\r\n                return setError('write in all fields!');\r\n            }\r\n            const date = [hour , minutes , day , month]\r\n            ajax.changeResource(number, date)\r\n            .then((room)=>dispatch(changeStatusRoom(room)))\r\n            .then(()=>success())\r\n            .catch(({error})=>setError(error));        \r\n    }\r\n\r\n   const modal = visible ? (\r\n            <Portal>\r\n                <form onSubmit={loadingData}>\r\n                <div className='modal'>\r\n                    <div className='modal__window'>\r\n                    <div className='modal__exit' onClick={clear}>X</div>\r\n                    <h3 className='modal__header'>Выберети свободную комнату</h3>\r\n                    <div className='modal__body'>\r\n                      <div>\r\n                          <div>Комната(номер)</div>\r\n                          <input type='text' name='number' id='number' onChange={(e) => setNumber(e.target.value)} ></input>\r\n                      </div>\r\n                    <div className=\"modal__dates\">\r\n                          <header>Дата</header>\r\n\r\n                        <div className='modal__dates_day_month'>\r\n                            <span>\r\n                              <div>День</div>\r\n                              <input maxLength=\"2\"   type='text' name='day' id='day' onChange={(e) => setDay(e.target.value)} ></input>\r\n                             </span>\r\n                             <span>\r\n                              <div>Месяц</div>\r\n                              <input maxLength=\"2\"  type='text' name='month' id='month' onChange={(e) => setMonth(e.target.value)} ></input>\r\n                             </span>\r\n                             \r\n                         </div>\r\n                         <div className='modal__dates_day_month'>\r\n                           <span>\r\n                             <div>Часы</div>\r\n                             <input maxLength=\"2\"  type='text' name='hour' id='hour' onChange={(e) => setHour(e.target.value)} ></input>\r\n                          </span>\r\n                          <span>\r\n                             <div>Минуты</div>\r\n                             <input maLength=\"2\"  type='text' name='minutes' id='minutes' onChange={(e) => setMinutes(e.target.value)} ></input>\r\n                        </span>\r\n                          </div>\r\n                    </div>\r\n                          <div> \r\n                      </div>\r\n                    </div>\r\n                    <div className='modal__footer'>\r\n                    <button type='submit'>Забронировать</button>\r\n                    </div>\r\n                    {error && <div className='modal__warning'>{error}</div>}\r\n                    </div>\r\n                </div>\r\n                </form>\r\n            </Portal>\r\n        ) : null;\r\n        return(\r\n\r\n            <div className='modal__btn'>\r\n            <button onClick={openModal}>занять место</button>\r\n            {modal}\r\n            </div>\r\n        )\r\n\r\n}\r\n\r\nexport default Modal;","const setVisibleWindow = () =>(dispatch) =>{\r\n   dispatch({type : 'SET_VISIBLE'});\r\n}\r\n\r\nconst unSetVisibleWindow = () =>(dispatch)=>{\r\n   dispatch({type : 'UNSET_VISIBLE'});\r\n}\r\n\r\nexport {setVisibleWindow , unSetVisibleWindow};","import React from 'react';\r\nimport Modal from './busyToPlace';\r\nconst Header = () =>{\r\n    return (\r\n        <header className='header'>\r\n            <Modal/>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nclass SuccessWindow extends React.Component{\r\n\r\n    render(){\r\n        const {visible} = this.props;\r\n        if(visible){\r\n            return (\r\n                <div className='successWindow'>\r\n                    Место забронировано успешно!\r\n                </div>\r\n            )\r\n        }\r\n        return<div></div>;\r\n    }  \r\n}\r\n\r\nconst mapStateToProps = ({SuccessWindowReducer : {visible}}) =>{\r\n    return {visible};\r\n}\r\n\r\nexport default connect(mapStateToProps)(SuccessWindow);","const createSelect = (qty) => {\r\n    const arrOption = [];\r\n    for(let i = 0; i < qty; i++ ){\r\n        arrOption.push(<option value={i + 1} key={i + 1}>{`${i + 1} этаж`}</option>)\r\n    }\r\n    return (arrOption);\r\n}\r\n\r\nexport {createSelect}","import React, { useEffect } from 'react';\r\nimport Ajax from \"./services/ajax\";\r\nimport { getRoomsUseFloor} from './actions/RoomAction';\r\nimport {connect, useDispatch, useSelector} from 'react-redux';\r\nimport {createSelect} from './Options';\r\n\r\nconst Select = () =>{\r\nconst qtyFloorState = useSelector(state => state.FloorReducer.qtyFloor);\r\nconst dispatch = useDispatch();\r\nconst ajax = new Ajax();\r\n\r\nconst selectHandler = () => {\r\n    const sel = document.querySelector('.selectFloor').selectedIndex; \r\n    dispatch(getRoomsUseFloor(sel + 1));\r\n}\r\n\r\nreturn (\r\n    <select className='selectFloor' onChange={selectHandler}>\r\n         {createSelect(qtyFloorState)}\r\n    </select>\r\n    )\r\n}\r\n\r\nexport default Select;","import './App.css';\r\nimport Room from './components/floors';\r\nimport Header from './components/header';\r\nimport SuccessWindow from './components/successWindow';\r\nimport Select from './components/Select';\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Header/>\r\n      <SuccessWindow/>\r\n      <div className='container'>\r\n        <div className='room'>\r\n             <Select/>\r\n             <Room/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const changeStatus = ({rooms}, value) =>{\r\n     const index = rooms.findIndex((elem)=>elem.room === value.room);\r\n     const oldElem = rooms[index];\r\n     const newElem = {...oldElem , data : value.data , status : value.status};\r\n     return [\r\n         ...rooms.slice(0, index),\r\n         newElem,\r\n         ...rooms.slice(index + 1)\r\n     ]\r\n}\r\n\r\nconst RoomReducer = (state = {rooms : []} , action) =>{\r\n    switch(action.type){\r\n      case 'LOADING_ROOMS':\r\n          return{\r\n              loading: true,\r\n              rooms : [],\r\n              error : null\r\n          }\r\n        case 'SUCCESS_ROOMS_INITIAL':\r\n            return{\r\n              loading: false,\r\n              rooms : action.payload,\r\n              error : null\r\n            }\r\n        case 'SUCCESS_ROOMS_TO_FLOOR' : \r\n          return {\r\n              loading: false,\r\n              rooms : action.payload,\r\n              error : null\r\n          }\r\n        case 'FAILURE_ROOMS':\r\n            return{\r\n              loading: false,\r\n              rooms : [],\r\n              error : action.payload\r\n            }\r\n        case 'CHANGE_STATUS_ROOM':\r\n            return {\r\n                rooms : changeStatus(state, action.payload)\r\n            }\r\n        default :\r\n        return state\r\n    }\r\n\r\n}\r\n\r\nexport {RoomReducer};","import { createStore, applyMiddleware , combineReducers, compose} from 'redux';\r\nimport {RoomReducer} from  './components/reducer/RoomReducer';\r\nimport {SuccessWindowReducer} from './components/reducer/SuccessWindowReducer';\r\nimport {FloorReducer} from './components/reducer/FloorReducer';\r\nimport thunk from 'redux-thunk';\r\n\r\nconst reducer = combineReducers({\r\n  RoomReducer : RoomReducer,\r\n  SuccessWindowReducer : SuccessWindowReducer,\r\n  FloorReducer : FloorReducer\r\n})\r\n\r\nconst composeEnhncer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducer , composeEnhncer(applyMiddleware(thunk)));\r\n\r\nexport default store;","const SuccessWindowReducer = (state = {visible : false} , action) => {\r\n  console.log('redux was here!', action.type)\r\n  switch(action.type){\r\n      case 'SET_VISIBLE' :\r\n         return {visible: true};\r\n      case 'UNSET_VISIBLE' :\r\n         return {visible : false}\r\n      default :\r\n        return state;\r\n  }\r\n}\r\n\r\nexport {SuccessWindowReducer};","const FloorReducer = (state = {qtyFloor : null}  , action) =>{\r\n    switch(action.type){\r\n        case 'GET_FLOORS' :\r\n            return {\r\n                qtyFloor : action.payload\r\n            }\r\n        default :\r\n        return state;\r\n    }\r\n}\r\n\r\nexport {FloorReducer};","import 'react-app-polyfill/stable';\nimport 'react-app-polyfill/ie11';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport store from './store';\nimport {Provider} from 'react-redux'\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n    <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}